<form id="cfg-form">
  <table class="m">
    <tr>
      <td class="bg w180">Ohjaustyyppi</td>
      <td>
        <select id="cfg-mode">
          <option value="0">Käsiohjaus</option>
          <option value="1">Hintaraja</option>
          <option value="2">Halvimmat tunnit</option>
        </select>
      </td>
    </tr>
    <tr>
      <td class="bg">Selite</td>
      <td id="cfg-mode-desc">-</td>
    </tr>
  </table>

  <br>

  <table class="m h" id="cfg-table-0">
    <tr>
      <td class="bg w180">Käsiohjaus</td>
      <td>
        <input type="checkbox" id="cfg-manualCmd"><label for="cfg-manualCmd"> OHJAUS POIS/PÄÄLLÄ</label>
      </td>
    </tr>
  </table>

  <table class="m h" id="cfg-table-1">
    <tr>
      <td class="bg w180">Hintaraja</td>
      <td>
        <input type="text" id="cfg-priceLimit" size="2"> c/kWh
      </td>
    </tr>
  </table>

  <table class="m h" id="cfg-table-2">
    <tr>
      <td class="bg w180">Tuntimäärä</td>
      <td>
        <input type="text" id="cfg-numberOfHours" size="2">
        <br><small>Kuinka monta halvinta tuntia 24h jaksosta ohjaus on päällä (oli hinta mikä hyvänsä)</small>
      </td>
    </tr>
    <tr>
      <td class="bg">Hintaraja</td>
      <td>
        <input type="text" size="2" id="cfg-alwaysOnPriceLimit"> c/kWh
        <br><small>Jos hinta alle tämän rajan, ohjaus on aina päällä vaikka ei olisi halvimpia tunteja</small>
      </td>
    </tr>
  </table>

  <br>

  <table class="m h" id="cfg-table-common">
    <tr>
      <td class="bg w180">Sähkön ALV-%</td>
      <td>
        <input type="text" id="cfg-alv" size="2">
      </td>
    </tr>
    <tr>
      <td class="bg">Varmuustunnit</td>
      <td>
        <input type="text" id="cfg-backupHours">
        <br><small>Jos yhteys ei toimi (hinta ei tiedossa), mutta kellonaika tiedetään.<br>Pilkulla erotetut tunnit
          jolloin lähtö on päällä (esim. "23,00,01")</small>
      </td>
    </tr>
    <tr>
      <td class="bg">Hätätilaohjaus</td>
      <td>
        <input type="checkbox" id="cfg-errorCmd"><label for="cfg-errorCmd"> OHJAUS POIS/PÄÄLLÄ</label>
        <br><small>Jos yhteys on poikki eikä kellonaika ole tiedossa, ohjataan rele tähän tilaan varmuuden
          vuoksi.</small>
      </td>
    </tr>
    <tr>
      <td class="bg">Tervetuloa</td>
      <td>
        <input type="checkbox" id="cfg-welcomeShown"><label for="cfg-welcomeShown"> NÄYTÄ</label>
        <br><small>Jos valittu niin sivu avatessa näytetään tervetuloa-ohjeviesti.</small>
      </td>
    </tr>
  </table>

  <br>

  <div class="tc">
    <input type="submit" value="Tallenna asetukset">
  </div>
</form>


<script>
  function showWelcomeModal() {
    getData(`${BASE_SCRIPT_URL}?req=content-welcome.html`, false)
      .then(welcome => {
        if (!welcome.success) {
          throw new Error(welcome);
        }
        showModal("Tervetuloa", welcome.data);
      })
      .catch(err => {
        console.error("Failed to load welcome message:", err);
      });
  };
</script>
<script src="content-settings.js"></script>
<script src="?req=content-settings.js"></script>