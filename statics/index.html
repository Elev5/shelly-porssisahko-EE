<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Pörssisähkö</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="?req=style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body>
  <div id="modal">
    <div id="modal-t">asdad</div>
    <div id="modal-c">Modal</div>
    <div id="modal-b"><input type="button" id="btn-modal" value="OK"></div>
  </div>

  <div>
    <div class="wrapper">
      <div class="top">
        <div id="title">Pörssisähkö</div>
        <div class="copyright">
          <div>&copy; <a href="https://jisotalo.github.io/" target="_blank">Jussi Isotalo</a></div>
        </div>
      </div>

      <div id="loading">
        <div class="loadingspinner"></div>
        <div id="loading-text">Ladataan skriptejä</div>
      </div>

      <div class="tabs">
        <div class="tab">
          <input type="radio" name="css-tabs" id="tab-status" checked class="tab-switch">
          <label for="tab-status" class="tab-label">Tila</label>
          <div class="tab-content" id="content-status"></div>
        </div>
        <div class="tab">
          <input type="radio" name="css-tabs" id="tab-settings" class="tab-switch">
          <label for="tab-settings" class="tab-label">Asetukset</label>
          <div class="tab-content" id="content-settings"></div>
        </div>
        <div class="tab">
          <input type="radio" name="css-tabs" id="tab-wifi" class="tab-switch">
          <label for="tab-wifi" class="tab-label">Wifi</label>
          <div class="tab-content" id="content-wifi"></div>
        </div>
        <div class="tab">
          <input type="radio" name="css-tabs" id="tab-log" class="tab-switch">
          <label for="tab-log" class="tab-label">Loki</label>
          <div class="tab-content" id="content-log"></div>
        </div>
        <div class="tab">
          <input type="radio" name="css-tabs" id="tab-help" class="tab-switch">
          <label for="tab-help" class="tab-label">Ohje</label>
          <div class="tab-content" id="content-help"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    let debug = () => { };

    const qs = (s) => document.querySelector(s);

    const me = () => {
      let s = new Error().stack;
      if (s) {
        s = s.split(String.fromCharCode(10));
      }
      if (s.length > 0) {
        let str = "";
        if (s[4] && s[4].trim().split(" ")[1]) {
          str += `/${s[4].trim().split(" ")[1]}`;
        }
        if (s[3] && s[3].trim().split(" ")[1]) {
          str += `/${s[3].trim().split(" ")[1]}`;
        }
        if (s[2] && s[2].trim().split(" ")[1]) {
          str += `/${s[2].trim().split(" ")[1]}`;
        }
        return `${str}:`;
      }
      return `Unknown stack:`;
    };

    const toggleLoading = (str) => {
      qs("#loading").style.visibility = str !== undefined ? "visible" : "hidden";
      qs("#loading-text").innerText = str;
    };

    const openTab = (tab) => {
      if (tab === undefined || tab === "") {
        return;
      }

      const e = qs("#" + tab);
      if (e) {
        e.checked = true;
      }
    };

    const showModal = (title, html, cb) => {
      qs("#modal-t").innerHTML = title;
      qs("#modal-c").innerHTML = html;
      qs("#modal").style.visibility = "visible";
      qs(".wrapper").style.opacity = 0.2;
      qs(".wrapper").style.pointerEvents = "none";

      const click = () => {
        qs(".wrapper").style.opacity = 1;
        qs("#modal").style.visibility = "hidden";
        qs(".wrapper").style.pointerEvents = "auto";
        qs("#btn-modal").removeEventListener("click", click);
        if (cb) {
          cb();
        }
      };

      qs("#btn-modal").addEventListener("click", click);
    };
  </script>
  <script src="script.js"></script>
  <script src="?req=script.js"></script>
</body>

</html>