let C_HIST=24,C_ERRC=3,C_ERRD=120,C_DEF={mode:0,m0:{cmd:0},m1:{lim:0},m2:{per:24,cnt:0,lim:-999,sq:0,m:999},vat:24,day:0,night:0,bk:0,err:0,out:0,fh:0,inv:0},c={s:{v:"2.8.2",dn:"",st:0,cmd:0,chkTs:0,errCnt:0,errTs:0,upTs:0,timeOK:0,configOK:0,fCmdTs:0,tz:"+02:00",p:{ts:0,now:0,low:0,high:0,avg:0}},p:[],h:[],c:C_DEF},l=!1,r=!1;function o(t,e){e-=t;return 0<=e&&e<3600}function b(t){return Math.floor((t?t.getTime():Date.now())/1e3)}function n(t,e,s){let n=t.toString();for(;n.length<e;)n=s?s+n:" "+n;return n}function f(t){return t.getDate()}function i(t){let e=t.toString();(e="+0000"==(e=e.substring(3+e.indexOf("GMT")))?"Z":e.substring(0,3)+":"+e.substring(3))!=c.s.tz&&(c.s.p.ts=0),c.s.tz=e}function u(t,e){console.log((new Date).toISOString().substring(11)+": "+(e?e+" - ":""),t)}function a(){var t=new Date;c.s.timeOK=2e3<t.getFullYear()?1:0,c.s.dn=Shelly.getComponentConfig("sys").device.name,!c.s.upTs&&c.s.timeOK&&(c.s.upTs=b(t))}function p(t){Shelly.call("KVS.Get",{key:"porssi-config"},function(e,t,s,n){c.c=e?e.value:{},"function"==typeof USER_CONFIG&&(c.c=USER_CONFIG(c.c));{e=function(t){c.s.configOK=t?1:0,c.s.chkTs=0,n&&(l=!1,A())};let t=0;if(C_DEF){for(var r in C_DEF)if(void 0===c.c[r])c.c[r]=C_DEF[r],t++;else if("object"==typeof C_DEF[r])for(var o in C_DEF[r])void 0===c.c[r][o]&&(c.c[r][o]=C_DEF[r][o],t++);C_DEF=null,0<t?Shelly.call("KVS.Set",{key:"porssi-config",value:c.c},function(t,e,s,n){n&&n(0===e)},e):e&&e(!0)}else e&&e(!0)}},t)}function A(){if(!l)if(l=!0,a(),c.s.configOK)if(function(){let t=new Date,e=!1;e=c.s.timeOK&&(0===c.s.p.ts||f(new Date(1e3*c.s.p.ts))!==f(t)),c.s.errCnt>=C_ERRC&&b(t)-c.s.errTs<C_ERRD?(C_ERRD,b(t),c.s.errTs,e=!1):c.s.errCnt>=C_ERRC&&(c.s.errCnt=0);return e}()){let e=new Date;i(e);try{let t=e.getFullYear()+"-"+n(1+e.getMonth(),2,"0")+"-"+n(f(e),2,"0")+"T00:00:00"+c.s.tz.replace("+","%2b");var s=t.replace("T00:00:00","T23:59:59");let l={url:"https://dashboard.elering.ee/api/nps/price/csv?fields=fi&start="+t+"&end="+s,timeout:5,ssl_ca:"*"};e=null,t=null,Shelly.call("HTTP.GET",l,function(e,t,s){l=null;try{if(0!==t||null==e||200!==e.code||!e.body_b64)throw Error("conn.err ("+s+") "+JSON.stringify(e));{e.headers=null,s=e.message=null,c.p=[],c.s.p.high=-999,c.s.p.low=999,e.body_b64=atob(e.body_b64),e.body_b64=e.body_b64.substring(1+e.body_b64.indexOf("\n"));let t=0;for(;0<=t;){e.body_b64=e.body_b64.substring(t);var n=[t=0,0];if(0===(t=1+e.body_b64.indexOf('"',t)))break;n[0]=+e.body_b64.substring(t,e.body_b64.indexOf('"',t)),t=2+e.body_b64.indexOf('"',t),t=2+e.body_b64.indexOf(';"',t),n[1]=+(""+e.body_b64.substring(t,e.body_b64.indexOf('"',t)).replace(",",".")),n[1]=n[1]/10*(100+(0<n[1]?c.c.vat:0))/100;var r=new Date(1e3*n[0]).getHours();n[1]+=7<=r&&r<22?c.c.day:c.c.night,c.p.push(n),c.s.p.avg+=n[1],n[1]>c.s.p.high&&(c.s.p.high=n[1]),n[1]<c.s.p.low&&(c.s.p.low=n[1]),t=e.body_b64.indexOf("\n",t)}e=null,c.s.p.avg=0<c.p.length?c.s.p.avg/c.p.length:0;var o=new Date,i=new Date(1e3*c.p[0][0]);if(f(i)!==f(o))throw Error("date err "+o.toString()+" - "+i.toString());c.s.p.ts=b(o),c.s.p.now=v()}}catch(t){c.s.errCnt+=1,c.s.errTs=b(),c.s.p.ts=0,c.p=[],u(t)}d()})}catch(t){u(t),d()}}else!function(){if(0==c.s.chkTs)return 1;var t=new Date,e=new Date(1e3*c.s.chkTs);return e.getHours()!=t.getHours()||e.getFullYear()!=t.getFullYear()||0<c.s.fCmdTs&&c.s.fCmdTs-b(t)<0}()?l=!1:d();else p(!0)}function d(){var t,e,s=new Date;i(s),r=!1;try{function n(t){var e;r!=t&&(c.s.st=12,u("Note: command edited by user script")),r=t,t=function(t){t&&(c.s.chkTs=b()),l=!1},c.c.inv&&(r=!r),e="{id:"+c.c.out+",on:"+(r?"true":"false")+"}",Shelly.call("Switch.Set",e,function(t,e,s,n){if(0===e){for(c.s.cmd=r?1:0;c.h.length>=C_HIST;)c.h.splice(0,1);c.h.push([b(),r?1:0]),n&&n(!0)}else n&&n(!1)},t)}0===c.c.mode?(r=1===c.c.m0.cmd,c.s.st=1):c.s.timeOK&&0<c.s.p.ts&&f(new Date(1e3*c.s.p.ts))===f(s)?(c.s.p.now=v(),1===c.c.mode?(r=c.s.p.now<=("avg"==c.c.m1.lim?c.s.p.avg:c.c.m1.lim),c.s.st=r?2:3):2===c.c.mode&&(r=function(){if(0!=c.c.m2.cn){var n=[];for(h=0;h<c.p.length;h+=c.c.m2.per){var r=[];for(ind=h;ind<h+c.c.m2.per&&!(ind>c.p.length-1);ind++)r.push(ind);if(c.c.m2.sq){let e=999,s=0;for(m=0;m<=r.length-c.c.m2.cnt;m++){let t=0;for(g=m;g<m+c.c.m2.cnt;g++)t+=c.p[r[g]][1];t/c.c.m2.cnt<e&&(e=t/c.c.m2.cnt,s=m)}for(m=s;m<s+c.c.m2.cnt;m++)n.push(r[m])}else{for(m=1;m<r.length;m++){var t=r[m];for(g=m-1;0<=g&&c.p[t][1]<c.p[r[g]][1];g--)r[g+1]=r[g];r[g+1]=t}for(m=0;m<c.c.m2.cnt;m++)n.push(r[m])}}var s=b();let e=!1;for(let t=0;t<n.length;t++)if(o(c.p[n[t]][0],s)){e=!0;break}return h=null,m=null,g=null,e}}(),c.s.st=r?5:4,!r&&c.s.p.now<=("avg"==c.c.m2.lim?c.s.p.avg:c.c.m2.lim)&&(r=!0,c.s.st=6),r)&&c.s.p.now>("avg"==c.c.m2.m?c.s.p.avg:c.c.m2.m)&&(r=!1,c.s.st=11)):c.s.timeOK?(c.s.st=7,t=1<<s.getHours(),(c.c.bk&t)==t&&(r=!0)):(r=1===c.c.err,c.s.st=8),c.s.timeOK&&(0<c.c.fh&&(e=1<<s.getHours(),(c.c.fh&e)==e)&&(r=!0,c.s.st=10),0<c.s.fCmdTs)&&(0<c.s.fCmdTs-b(s)?(r=!0,c.s.st=9):c.s.fCmdTs=0),"function"==typeof USER_OVERRIDE?USER_OVERRIDE(r,c,n):n(r)}catch(t){u(t),l=!1}}let h=0,m=0,g=0;function v(){var e=b();for(let t=0;t<c.p.length;t++)if(o(c.p[t][0],e))return c.p[t][1];throw c.p.length<24&&(c.s.p.ts=0),Error("no price for this hour")}u("shelly-porssisahko v."+c.s.v),u("URL: http://"+(Shelly.getComponentStatus("wifi").sta_ip??"192.168.33.1")+"/script/"+Shelly.getCurrentScriptId()),HTTPServer.registerEndpoint("",function(s,n){try{if(l)return s=null,n.code=503,void n.send();var r=function(t){var e={},s=t.split("&");for(let t=0;t<s.length;t++){var n=s[t].split("=");e[n[0]]=n[1]}return e}(s.query);s=null;let t="application/json",e=(n.code=200,!0);var o="text/html",i="text/javascript";"s"===r.r?(a(),n.body=JSON.stringify(c),e=!1):"r"===r.r?(p(c.s.configOK=!1),c.s.p.ts=0,n.code=204,e=!1):"f"===r.r&&r.ts?(c.s.fCmdTs=+(""+r.ts),c.s.chkTs=0,n.code=204,e=!1):r.r?"s.js"===r.r?(n.body=atob("H4sIAAAAAAAACo1W4W7bNhB+FYXrAhJmCKft/thTjbbJ1nVJM9RegaEoFkaiI9o06ZAnt4art8mb5MV2lGRHCdx2f+KY/O7uu7vvjjYKkr/fn6WEcPwYx8+bkEL6IndZuVAWxE2p/HqsjMrAeQqMn7z6PaUsfbGp+HjycnL673jyPv1I/ry7XVurAyi4u727tYTHo6BdMZNlwG9vtAWZSGNU4uVM2t3R2uhHJ0onhTQrvVhqmaA7Y+5uk4iYyXlwxsgd8n/C6qhSW5ksI7kaeLSN+UH6RVkGKC20bBMaGaClm0mOdnN0r1XuQpAs+ry7xWigjdzCawjadFF/yfncHW0RP4dEBtAPLwDKpA77oBYLZK8XeksvFhYw3gyLmoS518sdTUTPtZ85DSAl+cTPL0467Xhc++gQ/38bi2Pbyi0kRAZWA5oHkKDSldN50uevX43Tj5/4QtXNRl24pbITeZXKsLZZghLZNMiDNIXDQ0Li59evFFIC8uoo+sLQjH/WNnefhXGZRN5WFDIUKQxX0icyvQmU/ER6wIby8JBKkRUqm6s8PegzTkiaNoDsKEKEtlb5N5Pzs8ND+VlqSJZuWRqkfLK2cqGzEwmSQo+IAhYGE23tKq5W0rx2WAGNDsZZrOBEXoeUttycNU7mTWK1sttU6T7uIpRXAby21/S4txeAZ+rLxTRmxhiG3z9KL42hRACWSEydP5VZgaV7AULm+ekK0WdxlJAvJVkh7bUiHDrMQGA/rxUInbOKMY5OY4g/csSgOxrLG+pMQ6zh7prtIdHgsFU67Q/1r62ZMMpeQzHUvR5rjz7qT00TJuoLjGJV6b4bNpgqwHQ6d8FnTEChLJ2WNoulojl2i23iXwFoRB/fe7apI3jMr2K842wpPebyzuVKeLVwK/W60CbvhIv4PdpoGwxcxh6DX29OTj/Uio2rr0dGPkW9oM+lkZmitYxRRtig3dFWWtjYWsEqbZSInWjUxw+O2VAJNx9RLLvsiDZVIib7LTEilg0em5BT752P3gH1lkT7QUJ6SsAXqFByUTNskzmL204JFcF4UFW85dNmjEHjRLVJR9665d00SrKhnlKNrNnG4IMAqS2NGXoFpbfJ0/5zHG0tmonGMYVUjRpzLWa4SigbbL82nUQltWi+cfPBQZ9n2KzB7hDZ775EwfA6MaiqNuLDhGSPxKS7Bqzxe7zH7+WTjawGyZNNF18lFI8fcKzYZRM2plrdF3MvhdYpOnk7vngnmvHX03UsNrt8yObouMvjGybd0BXHgcU9fBKXL844WoJoGqjiVLhxs20YCj8f49gDfcpJn7BKPNlQQnq4h2qDc1RVgdXfA7xsEL9hwH+U9JS1MSc67necCNRHFMkxiysIkW9c6cN3o2NXSBtX2xLUD9BUjnYGY4Xlzb9vMCDRSI2I2EUxRofvWj7bWXZKui/F+1tsR4+guu7LEaFcMV4usUfqzLll52Gon6Ow1BaXQoA1CmSlg77SRsM6JfX/RpHhdszg0XrY7Rnc+kOIW6J5cqFeDYNf+s/iIyqijnDOmrsoEhZf4wfPBLb52wuA31tWU/zRY8z6B8wLnecKf2wEVdfAlUDv8+fH6jkulSFuy5FXN2/RU65WOPpY63sUZcP/ABwXa3JNCgAA"),t=i):"s.css"===r.r?(n.body=atob("H4sIAAAAAAAACo1VS2/jNhD+K8QGBZJsJEvJOnUktGhPCxRF0Ut7KXqgyKHEmiIFkvJjA//3Dqmns1m0F1ucF795fMPN/T25J64Bpc5JZ6xz0tFmb0gQ37I78kuPIiKd8VQZkpDG+67YbP4ZJamQaBiEDqW19E1fpcy0s8HmG7F/lQy0g4J8/u0P8rMQYA35DBosVeT3vlKSTSbk8JRm5H6DTq+kMqfEyS9S1wV+Ww42QVFJLnji5wdC0YYZZWxBboCJTOSTLjhTtq+t6TVH7SN7gm1WEiU1JA3IuvEFydNP0JZEGO3DNQgvS19miaCtVOeC/AmWU01L0tJTcpTcNwX59GKD3XjKs+y7oLa11BiD0N6bknSU84h8253QpIu4b7z0ChDd6tIRxuCPCXpv2ugVHZjpztf2WboL9lTJWicOlCiIUHBKQPOSeDj5JKoKYkOaIUgq1AljcOk6Rc+DeZR7WjlUdMZJL01wAUW9PEB5Xb6cVuyFzS5FUYEwFh6mIxUebGyG9qCxtB8+lMt1aKNg5TxbK6A2dNY3kzZkqgzFCArEgN27NXRt9BwqUbQCtdZWyrD9my4/pt9vQ73mfmRY8ec81nAcKjtaYqOcUZJjws80221Lwnrrwnh1RmJmdr55TBTvvpqBpZCYqFG9R6xfEqk5nNAEu2O6BVDIENGskOVxqq4qL4Qo5xmfpth0lEl/js6xQgVrgO2Bf7wqy38HGvIvvgoTI3x8k+l8a75K6nFwNd26DbWVOIrhN/HQoswDxlF9qx16CxsZEj6is+t0nMFY4QQOeJubGj1VN32MpVmYO5xH/EiJcB6b5y3VrqMW48wdnhKfBnkUI+5JdWxk6NY0EZTLHlFsQ1epli0d2hqw5i4OGLVEaiF1dLuQn/ZwFpa24MiQUJgI/ItokCxIaYs70sPt03PGob5Dn8tAjZQx4nkhpHU+YY1UHIlV1RPrj2PSlVFY1QNYLxlVE8kxhW+TFXmftCY0UUVm4Zbg0gIbyW6OEXkLXNLb9Xrb4bq6C+AjvBbRvcOyq8m/rGzXmbxOe22c9rDVluLHCZ43+7D4sqtgdh0sPgmLb458rRSmPjT+f2Q8DOFbwx+5PJDXZYGXS2uWG12Y/rg+1kOlaBeetenr66IsmN/Bu34iBh6xUPTVCsc3cVo7Qq7XDUaPExtxQaDL0dIuGh7zXbay3I1PT9r6PJvTHCs46bAa+VivyO9gbrfroswYW7XIx65OqurhxiWs5e9P7gX50vX+L3/u4Ieqx27rv9++hHlg9eVfkoq6D6gIAAA="),t="text/css"):"status"===r.r?(n.body=atob("H4sIAAAAAAAACqVSS07DMBS8iuUVLJo2CyQWqSV2CFUqElzgxXbJax07xK8tuU/OwAVyMZxPU6UtbFjYi5nxvJmXJASp0Uwa8H7JcyYlFwmV4agBPMaPC7HOtrD3zFbUEqiWfiZzJVaggABsFEXDo16589oyrw2SHvWeTsbiramzXfNtWYaWYOJq3fFSxqipbVOHa1QpqMRkoKeqKgocBblTelSsAIl0SGQxP0uUHQXvaGDE0W6cSObdXkSi8HBazsZ8sXCCdzqTzvAJSbLlYpaXD1dETvEigKl4bWo8hB5tbwvEtsBclz6Zp2FkeBXi9HMnn4ATSz+4eMIdXIHP7Qqv0PVg29mkTlV9t+JcrJ92q4H5o0Hvm6EnVyL8I/YvAVvny4znpJ3kRq5e4WWJBYlSf774Ox4swi8HtPfR1vP7ZD7QP8yL/z3xAgAA"),t=o):"status.js"===r.r?(n.body=atob("H4sIAAAAAAAACoVW627bNhR+FZntDHKSFTsbBiQSbWy9oENbpFgMbIBhzKxER6xlUhVpZ4Gtf3mUPENfwC+2Q11sy3M6xLHJw3P5zuHHQ25SbpyM9r0x/Ee0H6xZ7nDK9IOMMKHDjckfNmKO10rETr9DqTbMcGJFnWpoklzdO2/yXOUYSeXEzDBESj95pe0JmvvaY/AdeYb2w9zP/JTLO5N4iuJYRasll8Y3wqSczl5uhB/Lkf1ykdNz0DVCxafdt1xroXdPyWL3beZ91Ri90L1oGSPiCyl5/m788QMVPkhG6NPucff44cPuEWw/3fx+i9r62jyk3I9UqvLG4i7nXIJ2zuO98lLFvOX9483rN3/fjv+YMN+uTRvFWJ6AiOV2i0IxfCMcprnhxqzCCzHce5bqvmVhINvMB6lv1FvxD4/xJYHco4vFn4lNv7HTpmWGryiFaNqMbse/jitodjr1c56lLOIY/aCRN1f5kpnXsBNjseRY8nvHTvCA//Sj8OevlvFYE68zIOT6xA9xMYN46xFy8GL3tHuShgvJJbGgyD599nCSzew91wvB8rW6dux2Zj5b3x3lVlSphZ/z4TuWroVs1NJWCY7U3rM05Qe9RNwl/1WcHZVKyLlqoZrdJF/YSjuG5Quhyz0BZ1VtztUlShZQFnDdc2Yu7oc2rNEjlIBLZpyElR6Q+7wHqw81tRZwDAQ36gsr7RiTvu8fCrhuA32/e3qQssL4sMf43P6tsgqm3aDSDM4IGGG8VyT+Ha8Akt4548MyuQDxxS99+7n8mewrjAYIImS7J7G2LCBQkzXPtVBQGuGvvcmUBNARLoGO1dHodg0B2Nh2FzjxgTk684Fxrdaln/GcbGyfWNLJNGjUOTUBD43bqHS7HcyHB/PegATcdcnSz1Y6wbyMXCrrr2RTebi6uvIkhG18ahjrkC4bF6V6JE2gwdGmAXlAoAGBdvdaNhyABgyT5YRPp5PBNDAXzXII2WJAvRdAaE2KgzcJ3mTbm6rAW2+k4KnmZ0AMwKxBXBqVtdLUGpVqhvLeIOiH1HS7Fpu2wMIKpalR9noEJu5gSq0sqMf6CF0fwjyPrYDigvusYxuNJfR2O4Zxm1vv1CrXwJ5NzeesxWeEgnoPoDCdQfAdXtQ5xmWpzdRLaYuv8aQPRKthH3ENfvu2jW+3gyNpbKtBMYLWg0rpwE/FclR3o+tGQLbbY94qQB6lq5hrbMgZJ5d+ywVMTxycsTgJe1mHBdbOk+4gDA2h1P4EZbMt2dThxDNDqo+OAdaHc2MrKatLNqGz0AAv7J1G0ctNerQjz2zUCM2VNL17Dl3UXH9WaRyUl+zLjRyhzyxa3OVqJePrFzy2f9UiGs68hGL7cW3I2IlSpjVFc2HQsNVJU3uZFOGFiYcz4lpdWLd1OdPb20p8hP4qo1VyF8FvPkTBOWK5NCmympXwfDmbqaVv7ifAp8TXKjcYcw+qPTTApB63dPLscySpKdjtRkBumMOKXWwInYiTmxc4bWlcPpYcNXfApKKupCi0iGGDsPy/OrXIXaE5UzgOhRuh+vbKbP+FqxCK1EiU0M/V6xS3S2URHfIriiJiJrJNdBMpqRW8inj5kIOuCt2FDsEPP8n7mZcXGouUOVw4cNHFSmv2nTdX9coy+7dTPSxfRfW4envVk2w/qm71emJzK4oA7i3v1W+3zXVQ/AtvzOYX0woAAA=="),t=i):"config"===r.r?(n.body=atob("H4sIAAAAAAAACp1U7W6bMBR9FQtpavuDJqFVW03EEj9ahaSBaqGd9tMYpzgYm4JJ1/3eo+QZ+gK82MxnAltbdVJQxPU991zfcy5mQLcAM5RlU01i4Gvwx+21vbr2zJE6gaZEPiNtQgww1lQsVU/QBJ8nV2PohhuUZxIlSB1AMyOMYAloMI1FQKA5qgMtskqXEm0RYMUulMVrhaI8ySuQUH8Z/UWmRodYFLtixyWhnHAgKrYDjHxJyBSHBEe++FlWoHzbQVeKIipeObBuH/o8W9TxgC9dOqWpFDGKslyW7+NL3TC+gj0qQC8dCo+i76G5H2EsJ2NoGPr48hDB6WMoB5hmujXnA0rjXM0v55yWpCXIj7rjWbGT6kcZ+vjmJE0hMBnyCQNrkVbvrjNyb27MURXtqt6hKBJ6VTHKSEu7DpVclejQ7FujvFvpj0Xxe2W7s7l1v/oPj7zXezzWcRz02m9Cgxu83+DMdjzrmzW3PtXejHKJUrRBfY/EE53ReCjeu/xza7FyHTBTfrOXS8sD3r3j2J9bKGuD+EZ5UAz3ydATorJFIqngYItYrvo6h8Z5PzQx4MToh67gVT9wAS/6gXM4qHIGzwZM0OiWGYStk7ycSxqXG5oWu8H4DB3zvfc7yB1RqVFU7Ghtvbc9YejZU+dZi3IEkpKJqS8H0Ad61TQNTMnW6tWgl2qgNKZhqfRbqPhjjbWD+2VoS+qm/VzKbk4eYoxwjmAj+r+N4rn20nYc1/srS+KWY/9d6dGUmypSTBq+g13OoOmnH6AFx4ziaHr0THkgnk9FQvixNtJOjupyq5Aw9tI2n+GUJhKm5GmeHWtqLDoWfE0fTzeZdqLsUB//AXQ0fhpJBgAA"),t=o):"config.js"===r.r?(n.body=atob("H4sIAAAAAAAACoVV3XLaOhB+FaOToVIxjvHp9AIjmJ6TznTapJkpOZ3eFWHW4EH+iS1oGcrb5E3yYl1JhtgJc3pj2G9Xq9Xu90l7CcqpeGcQbkXpABfVLoso4+O9Knf7JKbbPFk4fofzSgkF3W6n6nbNX7bXK5TFvSi8ryj5K80XQJiXZBmUH+5urvnN7dX779O7L14qCkrBFZh6NsoLleSZsxVyA5xc7MWBjC/2cBhdWs94xtxmPhuoPG1aR75RDRwtCyfZFuFoBdEaFuhAe0JqkwwJsVFb0VyMloUXYteA0bJwlixXzXhjh7pvghMSxnlJtQHcD2EUvAmh12Oix2ejJCs2ylG7As9oapjnP4mTLDj5pg9LxiMp5iAdzHCCLvaUkB4wrxCLqRKlooFLfMKwNSZ47Mxsp+frVp+FV0IhRQTvpKTkG3HJnNQ9jFd/iIwJO38Ku5Ep59hSqrz5ujsYjYBxrn/qPZ4HxatmkC0ZyrI1HLTPDCf1+1G6aAWmvofQudhBXyZpkyADD4HaGfQLKJvOwEPg5Iwy1XYicHJW9+0KAq+6P1dA0E/bSZ42f1ZZYCpDqfmHQyRUtKIooSjPqlyCbgUOANjhEAJl7r//TL1iU+kQm64SW60DsVi830KmrpNKAQ6Ukkgm0Zq4RrY4vPEevKIEHXMFsdhIRVmoldzWqiUvhvcs24z4Iw0QsV0SznFTqGufGGgoaAPDnEaL3KBtmTLX6PHoaghVe1CQ/KVSJ4Oh7xolHpc1JKqXoRiPnoZKtceo8ehrSVV752vk8xO3NS//n+DdrmE4159fhsFnCG6CMJP+2KDQsJm/pHl9MstgfpbgxxBDXR41aO0eOXvqc4vStR9py2+EWnlpktETy59WNHjO6iXVPT9H9GMlwVMlQbOSE4aIoYzk4odIlLMEdSWUoP99ue69uiyL6PLT16k3BTVZw46TIi+rKukj2eNkSbpWEq96H6e3n71KlUm2TOIdVYyFge9zLr0I+TRpJJ32yKTk+uBqBRnVPBcS8HIkd0JKwLtNqU0Hy9Qv2QHPY/V1Cpt9TcoVDB19x7IZO7Dhc1x66qcyvpM26x3qEJy/l0JViaVW6ZEVeRn9WZfmObXPa1HmaaHL3mQqSR8fHh/Kx4chdjPbSImPLD6wWLY/wk8tTTYxs41ljiy+0vLN8h+UXQ7g795b/zW8fusznBq8nIRtWtxVFdeJXHuewH+D29gOk9tPHbzLGifEJjBsz+E3SeO7LxcIAAA="),t=i):n.code=404:(n.body=atob("H4sIAAAAAAAACo1SzY7TMBB+FeMDakWTihvajb1CsAf2xAFxRa49bWbr2sYzaVUh3oZn2Bfoi+E02Z8srODieOYbf983k2leuWj5mKDlnddNfwpvwkZB0M0O2AjbmkzAquN19U43jOxBfz7dZSKk0692e7prlkN2eBDMDtQe4ZBiZmFjYAis5AEdt8rBHi1U52CBARmNr8gaD+qt1I3DvbDeECmOaQjRqb9rFvChghKG8SGl4nwC2piO+nV/XoqbrlCITxTZ+ChmjRFthrVqmRNdLJe3OCD1GgWbvCl9f1uVeWz1E6RZGj0fJR6FRttmRc9i3WBIHYt+yiobh3EYkTm3ZlYVseGOyqDBbqHYHb73BKRF480KvFjHPKm/F6jOsP6C3jTL4T51UI0/4TyM6pFCv9zEP00XyjVuXjY5xR9Mvi+r1G3L8b9OB56p0+EkmzGxLgXE4uP1V3XA4OKh9tEaxhjqmHGDocZgfeeAZrJHfBuJ5fzSAwunyvJ3u6K3sBkMw7WHPlKgtKsnqRnMFyYlCO5Di94NFavojvWTbF+U4fsN9fCPvcmC1JRFDqaLPtWUrSq2r+BCXmUl30CdIXljYSb7xuVCyonmjOY/F5b+oPQYtoWwIIXAK0l89EAtAMu+vD4veC8kqS6xPMsN1wl9SYz2i836lmTZ8XHGvwHYLtlMJgQAAA=="),t=o),n.headers=[["Content-Type",t]],e&&n.headers.push(["Content-Encoding","gzip"])}catch(t){u(t),n.code=500}n.send()}),Timer.set(1e4,!0,A),A();

function USER_CONFIG(config) {
  config = {
    /**  
     * Active mode
     * 0: manual mode (on/off toggle)
     * 1: price limit
     * 2: cheapest hours 
    */
    mode: 0,
    /** Settings for mode 0 (manual) */
    m0: {
      /** Manual relay output command [0/1] */
      cmd: 0
    },
    /** Settings for mode 1 (price limit) */
    m1: {
      /** Price limit limit - if price <= relay output command is set on [c/kWh] */
      lim: 0
    },
    /** Settings for mode 2 (cheapest hours) */
    m2: {
      /** Period length [h] (example: 24 -> cheapest hours during 24h) */
      per: 24,
      /** How many cheapest hours */
      cnt: 0,
      /** Always on price limit [c/kWh] */
      lim: -999,
      /** Should the hours be sequential / in a row [0/1] */
      sq: 0,
      /** Maximum price limit [c/kWh] */
      m: 999
    },
    /** VAT added to spot price [%] */
    vat: 24,
    /** Day (07...22) transfer price [c/kWh] */
    day: 0,
    /** Night (22...07) transfer price [c/kWh] */
    night: 0,
    /** Backup hours [binary] (example: 0b111111 = 00, 01, 02, 03, 04, 05) */
    bk: 0b0,
    /** Relay output command if clock time is not known [0/1] */
    err: 0,
    /** Output number to use [0..n] */
    out: 0,
    /** Forced ON hours [binary] (example: 0b110000000000001100000 = 05, 06, 19, 20) */
    fh: 0b0,
    /** Invert output [0/1] */
    inv: 0
  };

  return config;
}