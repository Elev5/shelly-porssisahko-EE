let C_HIST=24,C_ERRC=3,C_ERRD=120,C_DEF={mode:0,m0:{cmd:0},m1:{lim:0},m2:{per:24,cnt:0,lim:-999,sq:0,m:999},vat:24,day:0,night:0,bk:0,err:0,out:0,fh:0,inv:0},c={s:{v:"2.8.1",dn:"",st:0,cmd:0,chkTs:0,errCnt:0,errTs:0,upTs:0,timeOK:0,configOK:0,fCmdTs:0,tz:"+02:00",p:{ts:0,now:0,low:0,high:0,avg:0}},p:[],h:[],c:C_DEF},l=!1,r=!1;function o(t,s){s-=t;return 0<=s&&s<3600}function a(t){return Math.floor((t?t.getTime():Date.now())/1e3)}function n(t,s,e){let n=t.toString();for(;n.length<s;)n=e?e+n:" "+n;return n}function f(t){return t.getDate()}function i(t){let s=t.toString();(s="+0000"==(s=s.substring(3+s.indexOf("GMT")))?"Z":s.substring(0,3)+":"+s.substring(3))!=c.s.tz&&(c.s.p.ts=0),c.s.tz=s}function b(t,s){console.log((new Date).toISOString().substring(11)+": "+(s?s+" - ":""),t)}function u(){var t=new Date;c.s.timeOK=2e3<t.getFullYear()?1:0,c.s.dn=Shelly.getComponentConfig("sys").device.name,!c.s.upTs&&c.s.timeOK&&(c.s.upTs=a(t))}function d(t){Shelly.call("KVS.Get",{key:"porssi-config"},function(s,t,e,n){c.c=s?s.value:{},"function"==typeof USER_CONFIG&&(c.c=USER_CONFIG(c.c));{s=function(t){c.s.configOK=t?1:0,c.s.chkTs=0,n&&(l=!1,A())};let t=0;if(C_DEF){for(var r in C_DEF)if(void 0===c.c[r])c.c[r]=C_DEF[r],t++;else if("object"==typeof C_DEF[r])for(var o in C_DEF[r])void 0===c.c[r][o]&&(c.c[r][o]=C_DEF[r][o],t++);C_DEF=null,0<t?Shelly.call("KVS.Set",{key:"porssi-config",value:c.c},function(t,s,e,n){n&&n(0===s)},s):s&&s(!0)}else s&&s(!0)}},t)}function A(){if(!l)if(l=!0,u(),c.s.configOK)if(function(){let t=new Date,s=!1;s=c.s.timeOK&&(0===c.s.p.ts||f(new Date(1e3*c.s.p.ts))!==f(t)),c.s.errCnt>=C_ERRC&&a(t)-c.s.errTs<C_ERRD?(C_ERRD,a(t),c.s.errTs,s=!1):c.s.errCnt>=C_ERRC&&(c.s.errCnt=0);return s}()){let s=new Date;i(s);try{let t=s.getFullYear()+"-"+n(1+s.getMonth(),2,"0")+"-"+n(f(s),2,"0")+"T00:00:00"+c.s.tz.replace("+","%2b");var e=t.replace("T00:00:00","T23:59:59");let l={url:"https://dashboard.elering.ee/api/nps/price/csv?fields=fi&start="+t+"&end="+e,timeout:5,ssl_ca:"*"};s=null,t=null,Shelly.call("HTTP.GET",l,function(s,t,e){l=null;try{if(0!==t||null==s||200!==s.code||!s.body_b64)throw Error("conn.err ("+e+") "+JSON.stringify(s));{s.headers=null,e=s.message=null,c.p=[],c.s.p.high=-999,c.s.p.low=999,s.body_b64=atob(s.body_b64),s.body_b64=s.body_b64.substring(1+s.body_b64.indexOf("\n"));let t=0;for(;0<=t;){s.body_b64=s.body_b64.substring(t);var n=[t=0,0];if(0===(t=1+s.body_b64.indexOf('"',t)))break;n[0]=+s.body_b64.substring(t,s.body_b64.indexOf('"',t)),t=2+s.body_b64.indexOf('"',t),t=2+s.body_b64.indexOf(';"',t),n[1]=+(""+s.body_b64.substring(t,s.body_b64.indexOf('"',t)).replace(",",".")),n[1]=n[1]/10*(100+(0<n[1]?c.c.vat:0))/100;var r=new Date(1e3*n[0]).getHours();n[1]+=7<=r&&r<22?c.c.day:c.c.night,c.p.push(n),c.s.p.avg+=n[1],n[1]>c.s.p.high&&(c.s.p.high=n[1]),n[1]<c.s.p.low&&(c.s.p.low=n[1]),t=s.body_b64.indexOf("\n",t)}s=null,c.s.p.avg=0<c.p.length?c.s.p.avg/c.p.length:0;var o=new Date,i=new Date(1e3*c.p[0][0]);if(f(i)!==f(o))throw Error("date err "+o.toString()+" - "+i.toString());c.s.p.ts=a(o),c.s.p.now=v()}}catch(t){c.s.errCnt+=1,c.s.errTs=a(),c.s.p.ts=0,c.p=[],b(t)}p()})}catch(t){b(t),p()}}else!function(){if(0==c.s.chkTs)return 1;var t=new Date,s=new Date(1e3*c.s.chkTs);return s.getHours()!=t.getHours()||s.getFullYear()!=t.getFullYear()||0<c.s.fCmdTs&&c.s.fCmdTs-a(t)<0}()?l=!1:p();else d(!0)}function p(){var t,s,e=new Date;i(e),r=!1;try{function n(t){var s;r!=t&&(c.s.st=12,b("Note: command edited by user script")),r=t,t=function(t){t&&(c.s.chkTs=a()),l=!1},c.c.inv&&(r=!r),s="{id:"+c.c.out+",on:"+(r?"true":"false")+"}",Shelly.call("Switch.Set",s,function(t,s,e,n){if(0===s){for(c.s.cmd=r?1:0;c.h.length>=C_HIST;)c.h.splice(0,1);c.h.push([a(),r?1:0]),n&&n(!0)}else n&&n(!1)},t)}0===c.c.mode?(r=1===c.c.m0.cmd,c.s.st=1):c.s.timeOK&&0<c.s.p.ts&&f(new Date(1e3*c.s.p.ts))===f(e)?(c.s.p.now=v(),1===c.c.mode?(r=c.s.p.now<=("avg"==c.c.m1.lim?c.s.p.avg:c.c.m1.lim),c.s.st=r?2:3):2===c.c.mode&&(r=function(){if(0!=c.c.m2.cn){var n=[];for(h=0;h<c.p.length;h+=c.c.m2.per){var r=[];for(ind=h;ind<h+c.c.m2.per&&!(ind>c.p.length-1);ind++)r.push(ind);if(c.c.m2.sq){let s=999,e=0;for(g=0;g<=r.length-c.c.m2.cnt;g++){let t=0;for(m=g;m<g+c.c.m2.cnt;m++)t+=c.p[r[m]][1];t/c.c.m2.cnt<s&&(s=t/c.c.m2.cnt,e=g)}for(g=e;g<e+c.c.m2.cnt;g++)n.push(r[g])}else{for(g=1;g<r.length;g++){var t=r[g];for(m=g-1;0<=m&&c.p[t][1]<c.p[r[m]][1];m--)r[m+1]=r[m];r[m+1]=t}for(g=0;g<c.c.m2.cnt;g++)n.push(r[g])}}var e=a();let s=!1;for(let t=0;t<n.length;t++)if(o(c.p[n[t]][0],e)){s=!0;break}return h=null,g=null,m=null,s}}(),c.s.st=r?5:4,!r&&c.s.p.now<=("avg"==c.c.m2.lim?c.s.p.avg:c.c.m2.lim)&&(r=!0,c.s.st=6),r)&&c.s.p.now>("avg"==c.c.m2.m?c.s.p.avg:c.c.m2.m)&&(r=!1,c.s.st=11)):c.s.timeOK?(c.s.st=7,t=1<<e.getHours(),(c.c.bk&t)==t&&(r=!0)):(r=1===c.c.err,c.s.st=8),c.s.timeOK&&(0<c.c.fh&&(s=1<<e.getHours(),(c.c.fh&s)==s)&&(r=!0,c.s.st=10),0<c.s.fCmdTs)&&(0<c.s.fCmdTs-a(e)?(r=!0,c.s.st=9):c.s.fCmdTs=0),"function"==typeof USER_OVERRIDE?USER_OVERRIDE(r,c,n):n(r)}catch(t){b(t),l=!1}}let h=0,g=0,m=0;function v(){var s=a();for(let t=0;t<c.p.length;t++)if(o(c.p[t][0],s))return c.p[t][1];throw c.p.length<24&&(c.s.p.ts=0),Error("no price for this hour")}b("shelly-porssisahko v."+c.s.v),b("URL: http://"+(Shelly.getComponentStatus("wifi").sta_ip??"192.168.33.1")+"/script/"+Shelly.getCurrentScriptId()),HTTPServer.registerEndpoint("",function(e,n){try{if(l)return e=null,n.code=503,void n.send();var r=function(t){var s={},e=t.split("&");for(let t=0;t<e.length;t++){var n=e[t].split("=");s[n[0]]=n[1]}return s}(e.query);e=null;let t="application/json",s=(n.code=200,!0);var o="text/html",i="text/javascript";"s"===r.r?(u(),n.body=JSON.stringify(c),s=!1):"r"===r.r?(d(c.s.configOK=!1),c.s.p.ts=0,n.code=204,s=!1):"f"===r.r&&r.ts?(c.s.fCmdTs=+(""+r.ts),c.s.chkTs=0,n.code=204,s=!1):r.r?"s.js"===r.r?(n.body=atob("H4sIAAAAAAAACo1W4W7bNhB+FYXrAhJmCKft/thTjbbJ1nVJM9RegaEoFkaiI9o06ZAnt4art8mb5MV2lGRHCdx2f+KY/O7uu7vvjjYKkr/fn6WEcPwYx8+bkEL6IndZuVAWxE2p/HqsjMrAeQqMn7z6PaUsfbGp+HjycnL673jyPv1I/ry7XVurAyi4u727tYTHo6BdMZNlwG9vtAWZSGNU4uVM2t3R2uhHJ0onhTQrvVhqmaA7Y+5uk4iYyXlwxsgd8n/C6qhSW5ksI7kaeLSN+UH6RVkGKC20bBMaGaClm0mOdnN0r1XuQpAs+ry7xWigjdzCawjadFF/yfncHW0RP4dEBtAPLwDKpA77oBYLZK8XeksvFhYw3gyLmoS518sdTUTPtZ85DSAl+cTPL0467Xhc++gQ/38bi2Pbyi0kRAZWA5oHkKDSldN50uevX43Tj5/4QtXNRl24pbITeZXKsLZZghLZNMiDNIXDQ0Li59evFFIC8uoo+sLQjH/WNnefhXGZRN5WFDIUKQxX0icyvQmU/ER6wIby8JBKkRUqm6s8PegzTkiaNoDsKEKEtlb5N5Pzs8ND+VlqSJZuWRqkfLK2cqGzEwmSQo+IAhYGE23tKq5W0rx2WAGNDsZZrOBEXoeUttycNU7mTWK1sttU6T7uIpRXAby21/S4txeAZ+rLxTRmxhiG3z9KL42hRACWSEydP5VZgaV7AULm+ekK0WdxlJAvJVkh7bUiHDrMQGA/rxUInbOKMY5OY4g/csSgOxrLG+pMQ6zh7prtIdHgsFU67Q/1r62ZMMpeQzHUvR5rjz7qT00TJuoLjGJV6b4bNpgqwHQ6d8FnTEChLJ2WNoulojl2i23iXwFoRB/fe7apI3jMr2K842wpPebyzuVKeLVwK/W60CbvhIv4PdpoGwxcxh6DX29OTj/Uio2rr0dGPkW9oM+lkZmitYxRRtig3dFWWtjYWsEqbZSInWjUxw+O2VAJNx9RLLvsiDZVIib7LTEilg0em5BT752P3gH1lkT7QUJ6SsAXqFByUTNskzmL204JFcF4UFW85dNmjEHjRLVJR9665d00SrKhnlKNrNnG4IMAqS2NGXoFpbfJ0/5zHG0tmonGMYVUjRpzLWa4SigbbL82nUQltWi+cfPBQZ9n2KzB7hDZ775EwfA6MaiqNuLDhGSPxKS7Bqzxe7zH7+WTjawGyZNNF18lFI8fcKzYZRM2plrdF3MvhdYpOnk7vngnmvHX03UsNrt8yObouMvjGybd0BXHgcU9fBKXL844WoJoGqjiVLhxs20YCj8f49gDfcpJn7BKPNlQQnq4h2qDc1RVgdXfA7xsEL9hwH+U9JS1MSc67necCNRHFMkxiysIkW9c6cN3o2NXSBtX2xLUD9BUjnYGY4Xlzb9vMCDRSI2I2EUxRofvWj7bWXZKui/F+1tsR4+guu7LEaFcMV4usUfqzLll52Gon6Ow1BaXQoA1CmSlg77SRsM6JfX/RpHhdszg0XrY7Rnc+kOIW6J5cqFeDYNf+s/iIyqijnDOmrsoEhZf4wfPBLb52wuA31tWU/zRY8z6B8wLnecKf2wEVdfAlUDv8+fH6jkulSFuy5FXN2/RU65WOPpY63sUZcP/ABwXa3JNCgAA"),t=i):"s.css"===r.r?(n.body=atob("H4sIAAAAAAAACo1VS2/jNhD+K8QGBZJsJEvJOnUktGhPCxRF0Ut7KXqgyKHEmiIFkvJjA//3Dqmns1m0F1ucF795fMPN/T25J64Bpc5JZ6xz0tFmb0gQ37I78kuPIiKd8VQZkpDG+67YbP4ZJamQaBiEDqW19E1fpcy0s8HmG7F/lQy0g4J8/u0P8rMQYA35DBosVeT3vlKSTSbk8JRm5H6DTq+kMqfEyS9S1wV+Ww42QVFJLnji5wdC0YYZZWxBboCJTOSTLjhTtq+t6TVH7SN7gm1WEiU1JA3IuvEFydNP0JZEGO3DNQgvS19miaCtVOeC/AmWU01L0tJTcpTcNwX59GKD3XjKs+y7oLa11BiD0N6bknSU84h8253QpIu4b7z0ChDd6tIRxuCPCXpv2ugVHZjpztf2WboL9lTJWicOlCiIUHBKQPOSeDj5JKoKYkOaIUgq1AljcOk6Rc+DeZR7WjlUdMZJL01wAUW9PEB5Xb6cVuyFzS5FUYEwFh6mIxUebGyG9qCxtB8+lMt1aKNg5TxbK6A2dNY3kzZkqgzFCArEgN27NXRt9BwqUbQCtdZWyrD9my4/pt9vQ73mfmRY8ec81nAcKjtaYqOcUZJjws80221Lwnrrwnh1RmJmdr55TBTvvpqBpZCYqFG9R6xfEqk5nNAEu2O6BVDIENGskOVxqq4qL4Qo5xmfpth0lEl/js6xQgVrgO2Bf7wqy38HGvIvvgoTI3x8k+l8a75K6nFwNd26DbWVOIrhN/HQoswDxlF9qx16CxsZEj6is+t0nMFY4QQOeJubGj1VN32MpVmYO5xH/EiJcB6b5y3VrqMW48wdnhKfBnkUI+5JdWxk6NY0EZTLHlFsQ1epli0d2hqw5i4OGLVEaiF1dLuQn/ZwFpa24MiQUJgI/ItokCxIaYs70sPt03PGob5Dn8tAjZQx4nkhpHU+YY1UHIlV1RPrj2PSlVFY1QNYLxlVE8kxhW+TFXmftCY0UUVm4Zbg0gIbyW6OEXkLXNLb9Xrb4bq6C+AjvBbRvcOyq8m/rGzXmbxOe22c9rDVluLHCZ43+7D4sqtgdh0sPgmLb458rRSmPjT+f2Q8DOFbwx+5PJDXZYGXS2uWG12Y/rg+1kOlaBeetenr66IsmN/Bu34iBh6xUPTVCsc3cVo7Qq7XDUaPExtxQaDL0dIuGh7zXbay3I1PT9r6PJvTHCs46bAa+VivyO9gbrfroswYW7XIx65OqurhxiWs5e9P7gX50vX+L3/u4Ieqx27rv9++hHlg9eVfkoq6D6gIAAA="),t="text/css"):"status"===r.r?(n.body=atob("H4sIAAAAAAAACqVSS07DMBS8iuUVLJo2CyQWqSV2CFUqElzgxXbJax07xK8tuU/OwAVyMZxPU6UtbFjYi5nxvJmXJASp0Uwa8H7JcyYlFwmV4agBPMaPC7HOtrD3zFbUEqiWfiZzJVaggABsFEXDo16589oyrw2SHvWeTsbiramzXfNtWYaWYOJq3fFSxqipbVOHa1QpqMRkoKeqKgocBblTelSsAIl0SGQxP0uUHQXvaGDE0W6cSObdXkSi8HBazsZ8sXCCdzqTzvAJSbLlYpaXD1dETvEigKl4bWo8hB5tbwvEtsBclz6Zp2FkeBXi9HMnn4ATSz+4eMIdXIHP7Qqv0PVg29mkTlV9t+JcrJ92q4H5o0Hvm6EnVyL8I/YvAVvny4znpJ3kRq5e4WWJBYlSf774Ox4swi8HtPfR1vP7ZD7QP8yL/z3xAgAA"),t=o):"status.js"===r.r?(n.body=atob("H4sIAAAAAAAACoVW627bNhh9FZntDHKSFTsbBiQSbWxtig5t0WIxsAGGMbMSHbGRSZeknQW2/vVR8iZ+sX3UxbY8p0Mcm5fvcnh4+JGbnFtvSfvBGP4T2o/WTHucMvMoE0zocGP140bM8VqJ1Ot3KDWWWU7cUKdq2kyrB+9Ga6UxkspLmWWIlHF0ZR0IqkMTMPhOAkv7sQ6XYc7lnc0CRfFXg9EL00sWKSKhkJLrt+MP76kIYWSEPu2+7b69f7/7hq7Rp4+/36KgZW/sY87DROVKNx53mnMJ1pqne+OFSnkr+oePr2/+vh3/MWGhm5s2hqk8AZHK7RbFYngjPGa45dau4gsx3EeW6qHlYUcCVgejoVVvxD88xZfER15ycf9nBqD2fsa23PAVpZDN2NHt+NdxBc11p6Hmy5wlHKMfDArmSi+YfQ2kjsWCY8kfPNfBA/7TjyKcv1qkY0OCzoCQ65M4xMcM8q1HyMP3u6fdk7RcSC6JA0X2y2ePJ6uZvePmXjC9Vtfey41bG1vfHa2tqJYWf9bDtyxfC9mY5S0KjszesTznB7tM3GX/NZwdUSXkXLVQzT5mX9jKeJbpe2HKPYFgFTfneEmye6AFQve8mY/7sUtrzQhlEJJZL2NlBOQ/H8HZA6fOAxQtuFVfWOnHmAzD8EDgug303e7pUcoK4+Me43P7t1pWMN0GlW5m9wROGO8NSXjHK4Ckd875ME0uYPjil777XP5M9gyjAYIMy92TWDsVEOBkzbURCqgR4TqYTEkEh/sS5FgdjW7XEoCNXaGAwxvZo+MbWd9ZXYZLrsnGHfkFnUyjxpxTG/HY+o1Jt9vBfHhw7w1IxH2fLMLlymSYl5lLY/OVbKoIV1dXgYS0TUwDbRPTRROiNE+kjQwE2jQgDwgMIDD+3sqlA9CAYbKY8Ol0MphG9qKZjmG1GFDvByC1IcUhmoRosh1NVeBdNFLw3PAzIAbg1iAunUquDHVOpZmlvDeI+jG13a7DZhywuEJpa5S9HoGOP5hSNxbVbXOErg9pnsdWALkQftlxhcYJersdQ7utrbdqpQ2oZ1PrednSM0JRvQdATGcQfUcX9RrTkmo7DXLa0ms66YPQathHWoPfvivj2+3gaDR1bFCMoPSgcnQQ5mIxqqvRdTNAtttj3SpAnuSrlBtsyZkgl2ErBHRPApzxOEl7WacF1c6z7iCOLaHU/URlsS3V1OEksENqjo4BNodz45iU1X2Z0VlsQRfuTqPo5SY/2pFnNmqE5kra3gOHKmqvP6s8jVxBL15u5Ah9Zsn9nVYrmV6/4Kn7qybRcBZkFLuP71KmXpIzYyiaC4uGrUqau8ukiC9sOpwR39nCvOPlTG1vG/ER+qvMVo37CH71EEXnhOXTrFjWqoSXyNmVOvnqMAM9ZaFR2mLMA2B7aEFJPe7kFLiXRVZLsNtNQNzQhxk32Qg6Eyc3L2jaybh893hq7oFLJV1JUewQwwZh+X88tcRdoTlDHAfiRqi+vZau/sJVCCQ1I0qY5/g6xe1TWSSH9RVFkTCbuCK6SZQ0Cl5FvHyTQVWF6kKHEIefrPuZlxcai5x5XHhw0aXKGPadN1f1yrL7t1PdLF9Fdbt6e9Wd5b5V3ep1x62tKCK4t4JXv90210HxL63TKyieCgAA"),t=i):"config"===r.r?(n.body=atob("H4sIAAAAAAAACp1U7W6bMBR9FQtpavuDJqFRW03EEj9ahaSBaqGd9tMxbnEwNsUmXfd7j5Jn6AvwYjPhI4GtrToJhLi+x+f6nnNth3QDMENSTgyFwcqAP26u3OVVYA/0CrQVWjHSJCQAY0PHMv2GdfB5dDmEfrRGuVQoRXoB2pIwghWg4SQRIYH2oAo0yF26UmiDACu2kSpedyjK03wHEvoj6S8ysVrEvNgWW64I5YQDsWM7wKiXlExwRHC8Ej/LHSjftNClpoiLVw6cm/suzwa1POBLm05ppkSCYpmr8n94YVrWV7BHheilReFB/D2y9y1M1GgILcscXhwiOH2MVA9Td7fivEdZkuv+5ZzTkrQEreJ2eVpslX4oQx+fnGQZ9L2Bf33doG9RHAtzh4wlabZ/iLQsO3Gh3bVAeYbSB/Pi99L1pzPnbvkfXnivxmRo4iSEoK7z/TKmrhc435yZ86kippQrlKE16iqejExGk74U7/LPnPnS98BUu8ddLJwABHee535uPJw14mvtKNGfDstMic4WqaKCgw1iua5rDK1xNzSy4Mjqhi7hZTdwDs+7gTHs7XIGz3pM0GpHE0SNX4KcK5qU85YV2177LBPzvZNbyC3RqXFcbGllsLeVt0z51PraoRyBtGRi+h4AZk+viqaGadkavWr0QjeUJjQqlX4LlXyssXFwPok2pCp6lSvV9ilAjBHOEaxF/7dRAt9duJ7nB39lKdxw7G+JDk05jyLDpOY7mFgJ7VX2AVpwzCiOJ0fPlIfi+VSkhB8bA+PkqNpuGRHGXpriJc5oqmBGnmby2NBtMbHgD/TxdC2NE22HavkPMP/LnhcGAAA="),t=o):"config.js"===r.r?(n.body=atob("H4sIAAAAAAAACoVVbW/bNhD+KzZXuGStMLJW9INlxtiWAsWaLECdFf020/LJJqy3SLRbw9O/yT/JH9uRlB0pMdYvsu+54/F49zzkIQHdS0R/FO5k2QMhq30WUSauDrrcH1RMd7la9vy+EJWWGgaDfjIY2L/sYFZoh/MofKgo+SXNl0AYV1kG5af72xtxe3f98Z/Z/ReeyoJS8CSmnk/yQqs86+1ksgVB3hxkTa7eHKCeXDrP1Zx57XwuUHNjOke+1S0cLQerbIdwtIZoA0t0oD0ljUnGhLionWwvRsvBS7lvwWg5OFOrdTve2qHpmxSEhHFeUmOA8EOYBO9DGA6ZHIr5RGXFVvf0vsAz2hoW+Q/SU0tBvpnDmiNTQobAeCGXMy1LTQOP+ITVvblr52LTaabkJRSJjOC3JKHkG/HIgjSNitc/iYwJO1+q28iWcewb1XyxGYwmE2BCmJ9mj5dB8bod5EqGsuxMAO0zE0j9iyhddgJTnyN0LnZ0kai0zYIRR6BxBhcFlG1nwBE4OaNMd50InJzVQ7eCgFcP5woILtJukufNX1QW2MpQT35dR1JHa4o6ifKsyhMwrcABAKvrECjz/vh9xottZUJcukruDNnlcvlxB5m+UZUGHCglUaKiDfGsNnF4VwfgRQkm5hpiuU00ZaGRa1eQjqEYPnQsswqPDEDkbkWEwE2hqX1qobGkLQxzWsEJi3a1yDwruqOrpUbjQdWJ13Kcjsa+Z+V2XNbSoVmGijt6WlI0Hiu5o6+jR+NdbJDPz9w2vPx/gg8GluHCfP61DD5DcBuEmczHBYWWzeI1zZuTOQaLswQ/hljqiqhFa+/I2VOfO5Ru/EhbcSv1mqcqoyeWP69o8Zw1S6oHcY7ox0qC50qCdiUnDBFLmUrI71Lp3gr0tdSS/v3lZvj2siyiy89fZ3wGerqBvSBFXlaVukCyx2pFBk4Sb4d/zu7+4pUuVbZS8Z5qxsLA9/E54RHyadpKOhuSaSnMwfUaMmp4LhPAS5HcyyQBvNu03vaxTPNc1Xgep69T2PyrKtcw7pm7lc1ZzcYv8YrrH9r6TtpsdmhCcP48haqSK6PSIyvyMvq5Lu2b6d7QoszTwpS9zbRKnx6fHsunxzF2M9smCb6k+Ipi2f4EP4002dTONk5yZPG1kW+Wf6fscgS/Dj/47+DdB5/h1OD1JFzT4oGuhEnkufME/nvcxnWY3H3u413WOiE2gWF76v8A7GSWEfwHAAA="),t=i):n.code=404:(n.body=atob("H4sIAAAAAAAACo1SzY7TMBB+FeMDakWTihvajb1CsAf2xAFxRa49bWbr2sYzaVUh3oZn2Bfoi+E02Z8srODieOYbf983k2leuWj5mKDlnddNfwpvwkZB0M0O2AjbmkzAquN19U43jOxBfz7dZSKk0692e7prlkN2eBDMDtQe4ZBiZmFjYAis5AEdt8rBHi1U52CBARmNr8gaD+qt1I3DvbDeECmOaQjRqb9rFvChghKG8SGl4nwC2piO+nV/XoqbrlCITxTZ+ChmjRFthrVqmRNdLJe3OCD1GgWbvCl9f1uVeWz1E6RZGj0fJR6FRttmRc9i3WBIHYt+yiobh3EYkTm3ZlYVseGOyqDBbqHYHb73BKRF480KvFjHPKm/F6jOsP6C3jTL4T51UI0/4TyM6pFCv9zEP00XyjVuXjY5xR9Mvi+r1G3L8b9OB56p0+EkmzGxLgXE4uP1V3XA4OKh9tEaxhjqmHGDocZgfeeAZrJHfBuJ5fzSAwunyvJ3u6K3sBkMw7WHPlKgtKsnqRnMFyYlCO5Di94NFavojvWTbF+U4fsN9fCPvcmC1JRFDqaLPtWUrSq2r+BCXmUl30CdIXljYSb7xuVCyonmjOY/F5b+oPQYtoWwIIXAK0l89EAtAMu+vD4veC8kqS6xPMsN1wl9SYz2i836lmTZ8XHGvwHYLtlMJgQAAA=="),t=o),n.headers=[["Content-Type",t]],s&&n.headers.push(["Content-Encoding","gzip"])}catch(t){b(t),n.code=500}n.send()}),Timer.set(1e4,!0,A),A();

function USER_CONFIG(config) {
  config = {
    /**  
     * Active mode
     * 0: manual mode (on/off toggle)
     * 1: price limit
     * 2: cheapest hours 
    */
    mode: 0,
    /** Settings for mode 0 (manual) */
    m0: {
      /** Manual relay output command [0/1] */
      cmd: 0
    },
    /** Settings for mode 1 (price limit) */
    m1: {
      /** Price limit limit - if price <= relay output command is set on [c/kWh] */
      lim: 0
    },
    /** Settings for mode 2 (cheapest hours) */
    m2: {
      /** Period length [h] (example: 24 -> cheapest hours during 24h) */
      per: 24,
      /** How many cheapest hours */
      cnt: 0,
      /** Always on price limit [c/kWh] */
      lim: -999,
      /** Should the hours be sequential / in a row [0/1] */
      sq: 0,
      /** Maximum price limit [c/kWh] */
      m: 999
    },
    /** VAT added to spot price [%] */
    vat: 24,
    /** Day (07...22) transfer price [c/kWh] */
    day: 0,
    /** Night (22...07) transfer price [c/kWh] */
    night: 0,
    /** Backup hours [binary] (example: 0b111111 = 00, 01, 02, 03, 04, 05) */
    bk: 0b0,
    /** Relay output command if clock time is not known [0/1] */
    err: 0,
    /** Output number to use [0..n] */
    out: 0,
    /** Forced ON hours [binary] (example: 0b110000000000001100000 = 05, 06, 19, 20) */
    fh: 0b0,
    /** Invert output [0/1] */
    inv: 0
  };

  return config;
}